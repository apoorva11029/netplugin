-- Logs begin at Tue 2016-07-26 15:13:04 PDT, end at Tue 2016-07-26 15:22:31 PDT. --
Jul 26 15:16:07 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:16:07 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + case $1 in
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ /usr/bin/docker ps
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + out=
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + init_update_cluster
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + peers=
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + get_peers 10.193.246.70
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ awk -F= '{ print $2 }'
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: Error:  client: etcd cluster is unavailable or misconfigured
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: error #0: dial tcp 10.193.246.71:4001: getsockopt: connection refused
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: error #1: dial tcp 10.193.246.71:2379: getsockopt: connection refused
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: error #2: dial tcp 10.193.246.70:4001: getsockopt: connection refused
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: error #3: dial tcp 10.193.246.70:2379: getsockopt: connection refused
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: error #4: dial tcp 10.193.246.70:4001: getsockopt: connection refused
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: error #5: dial tcp 10.193.246.70:2379: getsockopt: connection refused
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + out=
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + peers=
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ echo
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ awk '{print gensub("http://", "", "g", "")}'
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + peers=
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ echo
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", "")}'
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + peers=
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ echo
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ awk '{print gensub("10.193.246.71", "", "g", "")}'
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + peers=
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ echo
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ awk '{print gensub("10.193.246.70", "", "g", "")}'
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + peers=
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ echo
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ awk '{print gensub(",,", "", "g", "")}'
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + peers=
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + peers=
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + '[' '' == '' ']'
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ++ env
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932158 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932221 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932235 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932250 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932264 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932287 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932297 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932305 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932321 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932332 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932345 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932398 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932451 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932457 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932464 I | etcdmain: Go Version: go1.5.3
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932470 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932477 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932677 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932723 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.932798 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.938696 I | etcdserver: name = node2
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.938710 I | etcdserver: data dir = /var/lib/etcd
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.938717 I | etcdserver: member dir = /var/lib/etcd/member
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.938734 I | etcdserver: heartbeat = 1000ms
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.938741 I | etcdserver: election = 10000ms
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.938747 I | etcdserver: snapshot count = 10000
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.938759 I | etcdserver: advertise client URLs = http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.938770 I | etcdserver: initial advertise peer URLs = http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.938793 I | etcdserver: initial cluster = node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.951218 I | etcdserver: starting member 134a0b2206344caf in cluster ea4db3e541110deb
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.951268 I | raft: 134a0b2206344caf became follower at term 0
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.951287 I | raft: newRaft 134a0b2206344caf [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.951294 I | raft: 134a0b2206344caf became follower at term 1
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.952324 I | etcdserver: starting server... [version: 2.3.1, cluster version: to_be_decided]
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.953075 N | etcdserver: added local member 134a0b2206344caf [http://10.193.246.71:2380 http://10.193.246.71:7001] to cluster ea4db3e541110deb
Jul 26 15:16:07 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:07.953192 N | etcdserver: added member ba2f8a1869173d06 [http://10.193.246.70:2380 http://10.193.246.70:7001] to cluster ea4db3e541110deb
Jul 26 15:16:08 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:08.090344 I | rafthttp: the connection with ba2f8a1869173d06 became active
Jul 26 15:16:08 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:08.155814 E | rafthttp: failed to dial ba2f8a1869173d06 on stream Message (dial tcp 10.193.246.70:7001: getsockopt: connection refused)
Jul 26 15:16:08 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:08.155844 I | rafthttp: the connection with ba2f8a1869173d06 became inactive
Jul 26 15:16:08 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:08.256997 I | rafthttp: the connection with ba2f8a1869173d06 became active
Jul 26 15:16:11 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:11.077638 I | raft: 134a0b2206344caf [term: 1] received a MsgVote message with higher term from ba2f8a1869173d06 [term: 2]
Jul 26 15:16:11 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:11.077679 I | raft: 134a0b2206344caf became follower at term 2
Jul 26 15:16:11 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:11.077759 I | raft: 134a0b2206344caf [logterm: 1, index: 2, vote: 0] voted for ba2f8a1869173d06 [logterm: 1, index: 2] at term 2
Jul 26 15:16:11 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:11.079353 I | raft: raft.node: 134a0b2206344caf elected leader ba2f8a1869173d06 at term 2
Jul 26 15:16:11 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:11.083561 I | etcdserver: published {Name:node2 ClientURLs:[http://10.193.246.71:2379 http://10.193.246.71:4001]} to cluster ea4db3e541110deb
Jul 26 15:16:11 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:16:11.083649 N | etcdserver: set the initial cluster version to 2.3
Jul 26 15:19:43 apoorva-testbed-2 systemd[1]: Stopping Etcd...
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + case $1 in
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + peers=
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + get_peers 10.193.246.70
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ awk -F= '{ print $2 }'
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + peers=
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + for i in '${out}'
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + for i in '${out}'
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ echo
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ echo
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ echo
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ echo
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + peers=,,,,
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ echo
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + peers=
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + peers=
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + '[' '' == '' ']'
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + echo '==> no peers found or single member cluster'
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: ==> no peers found or single member cluster
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + /usr/bin/docker stop etcd
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:19:43.116882 N | osutil: received terminated signal, shutting down...
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:19:43.117793 E | rafthttp: failed to read ba2f8a1869173d06 on stream MsgApp v2 (net/http: request canceled)
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[9009]: 2016-07-26 22:19:43.117812 I | rafthttp: the connection with ba2f8a1869173d06 became inactive
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: etcd
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: + /usr/bin/docker rm etcd
Jul 26 15:19:43 apoorva-testbed-2 etcd.sh[16158]: etcd
Jul 26 15:19:43 apoorva-testbed-2 systemd[1]: Stopped Etcd.
Jul 26 15:20:06 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:20:06 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + case $1 in
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ /usr/bin/docker ps
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + out=
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + init_update_cluster
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + peers=
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + get_peers 10.193.246.70
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ awk -F= '{ print $2 }'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + peers=
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + for i in '${out}'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + for i in '${out}'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ echo
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ echo
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ echo
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ echo
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + peers=,,,,
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ echo
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + peers=
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + peers=
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + '[' '' == '' ']'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ++ env
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:20:06 apoorva-testbed-2 etcd.sh[16433]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070453 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070509 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070523 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070538 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070552 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070560 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070569 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070577 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070591 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070601 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070614 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070667 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070741 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070749 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070757 I | etcdmain: Go Version: go1.5.3
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070763 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070771 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.070978 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.071037 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.071110 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.075296 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.075319 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.075331 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16433]: 2016-07-26 22:20:07.075341 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:20:07 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + case $1 in
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + peers=
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + get_peers 10.193.246.70
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ awk -F= '{ print $2 }'
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + peers=
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + for i in '${out}'
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + for i in '${out}'
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ echo
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ echo
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ echo
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ echo
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + peers=,,,,
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ echo
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + peers=
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + peers=
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + '[' '' == '' ']'
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + echo '==> no peers found or single member cluster'
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: ==> no peers found or single member cluster
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + /usr/bin/docker stop etcd
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: + /usr/bin/docker rm etcd
Jul 26 15:20:07 apoorva-testbed-2 etcd.sh[16647]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:20:07 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:20:07 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:20:07 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:20:17 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:20:17 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:20:17 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + case $1 in
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ /usr/bin/docker ps
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + out=
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + init_update_cluster
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + peers=
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + get_peers 10.193.246.70
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ awk -F= '{ print $2 }'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + peers=
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + for i in '${out}'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + for i in '${out}'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ echo
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ echo
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ echo
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ echo
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + peers=,,,,
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ echo
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + peers=
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + peers=
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + '[' '' == '' ']'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ++ env
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:20:17 apoorva-testbed-2 etcd.sh[16719]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.047949 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048000 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048015 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048030 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048044 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048059 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048069 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048077 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048097 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048108 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048121 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048181 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048245 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048252 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048259 I | etcdmain: Go Version: go1.5.3
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048265 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048273 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048430 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048486 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.048566 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.050343 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.050366 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.050378 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16719]: 2016-07-26 22:20:18.050388 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:20:18 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + case $1 in
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + peers=
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + get_peers 10.193.246.70
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ awk -F= '{ print $2 }'
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + peers=
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + for i in '${out}'
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + for i in '${out}'
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ echo
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ echo
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ echo
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ echo
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + peers=,,,,
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ echo
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + peers=
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + peers=
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + '[' '' == '' ']'
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + echo '==> no peers found or single member cluster'
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: ==> no peers found or single member cluster
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + /usr/bin/docker stop etcd
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: + /usr/bin/docker rm etcd
Jul 26 15:20:18 apoorva-testbed-2 etcd.sh[16834]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:20:18 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:20:18 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:20:18 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:20:28 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:20:28 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:20:28 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + case $1 in
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ /usr/bin/docker ps
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + out=
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + init_update_cluster
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + peers=
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + get_peers 10.193.246.70
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ awk -F= '{ print $2 }'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + peers=
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + for i in '${out}'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + for i in '${out}'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ echo
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ echo
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ echo
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ echo
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + peers=,,,,
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ echo
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + peers=
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + peers=
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + '[' '' == '' ']'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ++ env
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:20:28 apoorva-testbed-2 etcd.sh[16881]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059599 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059657 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059671 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059695 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059720 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059747 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059757 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059765 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059781 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059792 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059804 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059858 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059912 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059919 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059926 I | etcdmain: Go Version: go1.5.3
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059931 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.059939 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.060047 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.060101 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.060143 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.064280 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.064303 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.064316 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16881]: 2016-07-26 22:20:29.064325 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:20:29 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + case $1 in
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + peers=
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + get_peers 10.193.246.70
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ awk -F= '{ print $2 }'
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + peers=
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + for i in '${out}'
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + for i in '${out}'
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ echo
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ echo
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ echo
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ echo
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + peers=,,,,
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ echo
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + peers=
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + peers=
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + '[' '' == '' ']'
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + echo '==> no peers found or single member cluster'
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: ==> no peers found or single member cluster
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + /usr/bin/docker stop etcd
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: + /usr/bin/docker rm etcd
Jul 26 15:20:29 apoorva-testbed-2 etcd.sh[16995]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:20:29 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:20:29 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:20:29 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:20:39 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:20:39 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:20:39 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + case $1 in
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ /usr/bin/docker ps
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + out=
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + init_update_cluster
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + peers=
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + get_peers 10.193.246.70
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ awk -F= '{ print $2 }'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + peers=
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + for i in '${out}'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + for i in '${out}'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ echo
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ echo
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ echo
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ echo
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + peers=,,,,
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ echo
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + peers=
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + peers=
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + '[' '' == '' ']'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ++ env
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:20:39 apoorva-testbed-2 etcd.sh[17065]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054502 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054552 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054566 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054580 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054594 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054609 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054619 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054627 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054647 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054658 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054672 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054748 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054813 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054820 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054828 I | etcdmain: Go Version: go1.5.3
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054834 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054841 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.054988 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.055036 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.055098 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.056567 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.056590 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.056602 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17065]: 2016-07-26 22:20:40.056611 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:20:40 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + case $1 in
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + peers=
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + get_peers 10.193.246.70
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ awk -F= '{ print $2 }'
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + peers=
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + for i in '${out}'
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + for i in '${out}'
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ echo
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ echo
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ echo
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ echo
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + peers=,,,,
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ echo
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + peers=
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + peers=
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + '[' '' == '' ']'
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + echo '==> no peers found or single member cluster'
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: ==> no peers found or single member cluster
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + /usr/bin/docker stop etcd
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: + /usr/bin/docker rm etcd
Jul 26 15:20:40 apoorva-testbed-2 etcd.sh[17178]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:20:40 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:20:40 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:20:40 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:20:50 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:20:50 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:20:50 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + case $1 in
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ /usr/bin/docker ps
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + out=
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + init_update_cluster
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + peers=
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + get_peers 10.193.246.70
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ awk -F= '{ print $2 }'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + peers=
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + for i in '${out}'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + for i in '${out}'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ echo
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ echo
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ echo
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ echo
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + peers=,,,,
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ echo
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + peers=
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + peers=
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + '[' '' == '' ']'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ++ env
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:20:50 apoorva-testbed-2 etcd.sh[17228]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042218 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042326 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042342 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042356 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042371 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042385 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042395 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042403 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042433 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042453 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042467 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042521 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042578 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042585 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042592 I | etcdmain: Go Version: go1.5.3
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042598 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042606 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042720 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042787 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.042830 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.045359 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.045381 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.045393 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17228]: 2016-07-26 22:20:51.045403 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:20:51 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + case $1 in
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + peers=
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + get_peers 10.193.246.70
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ awk -F= '{ print $2 }'
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + peers=
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + for i in '${out}'
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + for i in '${out}'
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ echo
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ echo
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ echo
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ echo
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + peers=,,,,
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ echo
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + peers=
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + peers=
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + '[' '' == '' ']'
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + echo '==> no peers found or single member cluster'
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: ==> no peers found or single member cluster
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + /usr/bin/docker stop etcd
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: + /usr/bin/docker rm etcd
Jul 26 15:20:51 apoorva-testbed-2 etcd.sh[17341]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:20:51 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:20:51 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:20:51 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:21:01 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:21:01 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:21:01 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + case $1 in
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ /usr/bin/docker ps
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + out=
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + init_update_cluster
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + peers=
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + get_peers 10.193.246.70
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + peers=
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + for i in '${out}'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + for i in '${out}'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ echo
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ echo
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ echo
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ echo
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + peers=,,,,
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ echo
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + peers=
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + peers=
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + '[' '' == '' ']'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ++ env
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:01 apoorva-testbed-2 etcd.sh[17385]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031762 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031812 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031826 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031841 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031854 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031863 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031872 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031880 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031895 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031905 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031918 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.031970 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.032026 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.032044 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.032051 I | etcdmain: Go Version: go1.5.3
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.032057 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.032065 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.032213 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.032267 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.032337 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.037405 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.037425 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.037437 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17385]: 2016-07-26 22:21:02.037446 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:21:02 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + case $1 in
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + peers=
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + get_peers 10.193.246.70
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + peers=
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + for i in '${out}'
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + for i in '${out}'
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ echo
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ echo
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ echo
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ echo
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + peers=,,,,
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ echo
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + peers=
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + peers=
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + '[' '' == '' ']'
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + echo '==> no peers found or single member cluster'
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: ==> no peers found or single member cluster
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + /usr/bin/docker stop etcd
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: + /usr/bin/docker rm etcd
Jul 26 15:21:02 apoorva-testbed-2 etcd.sh[17500]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:02 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:21:02 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:21:02 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:21:12 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:21:12 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:21:12 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + case $1 in
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ /usr/bin/docker ps
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + out=
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + init_update_cluster
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + peers=
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + get_peers 10.193.246.70
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + peers=
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + for i in '${out}'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + for i in '${out}'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ echo
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ echo
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ echo
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ echo
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + peers=,,,,
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ echo
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + peers=
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + peers=
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + '[' '' == '' ']'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ++ env
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:12 apoorva-testbed-2 etcd.sh[17575]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.072924 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.072995 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073011 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073026 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073040 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073049 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073058 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073067 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073089 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073100 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073114 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073171 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073228 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073235 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073242 I | etcdmain: Go Version: go1.5.3
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073248 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073256 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073453 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073506 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.073585 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.075513 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.075533 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.075544 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17575]: 2016-07-26 22:21:13.075554 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:21:13 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + case $1 in
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + peers=
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + get_peers 10.193.246.70
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + peers=
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + for i in '${out}'
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + for i in '${out}'
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ echo
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ echo
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ echo
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ echo
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + peers=,,,,
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ echo
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + peers=
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + peers=
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + '[' '' == '' ']'
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + echo '==> no peers found or single member cluster'
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: ==> no peers found or single member cluster
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + /usr/bin/docker stop etcd
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: + /usr/bin/docker rm etcd
Jul 26 15:21:13 apoorva-testbed-2 etcd.sh[17689]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:13 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:21:13 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:21:13 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:21:23 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:21:23 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:21:23 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + case $1 in
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ /usr/bin/docker ps
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + out=
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + init_update_cluster
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + peers=
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + get_peers 10.193.246.70
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + peers=
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + for i in '${out}'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + for i in '${out}'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ echo
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ echo
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ echo
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ echo
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + peers=,,,,
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ echo
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + peers=
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + peers=
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + '[' '' == '' ']'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ++ env
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:23 apoorva-testbed-2 etcd.sh[17737]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058297 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058347 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058361 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058376 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058390 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058399 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058407 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058415 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058438 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058450 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058463 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058520 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058575 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058581 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058589 I | etcdmain: Go Version: go1.5.3
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058595 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058603 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058775 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058829 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.058873 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.062880 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.062903 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.062915 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17737]: 2016-07-26 22:21:24.062934 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:21:24 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + case $1 in
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + peers=
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + get_peers 10.193.246.70
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + peers=
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + for i in '${out}'
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + for i in '${out}'
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ echo
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ echo
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ echo
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ echo
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + peers=,,,,
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ echo
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + peers=
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + peers=
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + '[' '' == '' ']'
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + echo '==> no peers found or single member cluster'
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: ==> no peers found or single member cluster
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + /usr/bin/docker stop etcd
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: + /usr/bin/docker rm etcd
Jul 26 15:21:24 apoorva-testbed-2 etcd.sh[17880]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:24 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:21:24 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:21:24 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:21:34 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:21:34 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:21:34 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + case $1 in
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ /usr/bin/docker ps
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + out=
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + init_update_cluster
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + peers=
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + get_peers 10.193.246.70
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + peers=
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + for i in '${out}'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + for i in '${out}'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ echo
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ echo
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ echo
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ echo
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + peers=,,,,
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ echo
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + peers=
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + peers=
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + '[' '' == '' ']'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ++ env
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:34 apoorva-testbed-2 etcd.sh[17922]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042068 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042127 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042142 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042164 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042179 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042188 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042197 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042205 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042220 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042230 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042243 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042303 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042359 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042365 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042373 I | etcdmain: Go Version: go1.5.3
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042379 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042386 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042498 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042550 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.042592 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.044300 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.044323 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.044335 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[17922]: 2016-07-26 22:21:35.044346 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:21:35 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + case $1 in
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + peers=
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + get_peers 10.193.246.70
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + peers=
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + for i in '${out}'
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + for i in '${out}'
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ echo
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ echo
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ echo
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ echo
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + peers=,,,,
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ echo
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + peers=
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + peers=
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + '[' '' == '' ']'
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + echo '==> no peers found or single member cluster'
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: ==> no peers found or single member cluster
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + /usr/bin/docker stop etcd
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: + /usr/bin/docker rm etcd
Jul 26 15:21:35 apoorva-testbed-2 etcd.sh[18035]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:35 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:21:35 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:21:35 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:21:45 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:21:45 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:21:45 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + case $1 in
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ /usr/bin/docker ps
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + out=
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + init_update_cluster
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + peers=
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + get_peers 10.193.246.70
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + peers=
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + for i in '${out}'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + for i in '${out}'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ echo
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ echo
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ echo
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ echo
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + peers=,,,,
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ echo
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + peers=
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + peers=
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + '[' '' == '' ']'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ++ env
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:45 apoorva-testbed-2 etcd.sh[18094]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056412 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056472 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056488 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056502 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056517 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056534 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056543 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056552 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056567 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056577 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056590 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056647 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056704 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056711 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056718 I | etcdmain: Go Version: go1.5.3
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056724 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056754 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056899 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.056951 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.057022 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.061970 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.061991 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.062004 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18094]: 2016-07-26 22:21:46.062014 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:21:46 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + case $1 in
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + peers=
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + get_peers 10.193.246.70
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + peers=
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + for i in '${out}'
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + for i in '${out}'
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ echo
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ echo
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ echo
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ echo
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + peers=,,,,
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ echo
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + peers=
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + peers=
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + '[' '' == '' ']'
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + echo '==> no peers found or single member cluster'
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: ==> no peers found or single member cluster
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + /usr/bin/docker stop etcd
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: + /usr/bin/docker rm etcd
Jul 26 15:21:46 apoorva-testbed-2 etcd.sh[18208]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:46 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:21:46 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:21:46 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:21:56 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:21:56 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:21:56 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + case $1 in
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ /usr/bin/docker ps
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + out=
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + init_update_cluster
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + peers=
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + get_peers 10.193.246.70
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + peers=
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + for i in '${out}'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + for i in '${out}'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ echo
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ echo
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ echo
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ echo
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + peers=,,,,
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ echo
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + peers=
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + peers=
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + '[' '' == '' ']'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ++ env
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:21:56 apoorva-testbed-2 etcd.sh[18266]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039506 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039559 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039574 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039595 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039610 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039620 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039629 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039637 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039657 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039670 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039684 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039766 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039827 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039834 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039842 I | etcdmain: Go Version: go1.5.3
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039848 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039855 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.039968 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.040014 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.040049 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.041783 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.041805 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.041817 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18266]: 2016-07-26 22:21:57.041827 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:21:57 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + case $1 in
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + peers=
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + get_peers 10.193.246.70
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ awk -F= '{ print $2 }'
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + peers=
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + for i in '${out}'
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + for i in '${out}'
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ echo
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ echo
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ echo
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ echo
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + peers=,,,,
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ echo
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + peers=
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + peers=
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + '[' '' == '' ']'
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + echo '==> no peers found or single member cluster'
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: ==> no peers found or single member cluster
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + /usr/bin/docker stop etcd
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: + /usr/bin/docker rm etcd
Jul 26 15:21:57 apoorva-testbed-2 etcd.sh[18382]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:21:57 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:21:57 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:21:57 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:22:07 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:22:07 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:22:07 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + case $1 in
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ /usr/bin/docker ps
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + out=
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + init_update_cluster
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + peers=
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + get_peers 10.193.246.70
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ awk -F= '{ print $2 }'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + peers=
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + for i in '${out}'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + for i in '${out}'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ echo
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ echo
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ echo
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ echo
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + peers=,,,,
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ echo
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + peers=
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + peers=
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + '[' '' == '' ']'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ++ env
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:22:07 apoorva-testbed-2 etcd.sh[18434]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034509 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034560 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034575 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034590 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034604 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034612 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034621 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034629 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034650 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034662 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034675 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034756 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034815 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034822 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034829 I | etcdmain: Go Version: go1.5.3
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034835 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034843 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.034997 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.035050 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.035120 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.040344 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.040368 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.040380 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18434]: 2016-07-26 22:22:08.040391 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:22:08 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + case $1 in
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + peers=
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + get_peers 10.193.246.70
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ awk -F= '{ print $2 }'
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + peers=
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + for i in '${out}'
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + for i in '${out}'
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ echo
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ echo
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ echo
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ echo
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + peers=,,,,
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ echo
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + peers=
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + peers=
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + '[' '' == '' ']'
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + echo '==> no peers found or single member cluster'
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: ==> no peers found or single member cluster
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + /usr/bin/docker stop etcd
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: + /usr/bin/docker rm etcd
Jul 26 15:22:08 apoorva-testbed-2 etcd.sh[18548]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:22:08 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:22:08 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:22:08 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:22:18 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:22:18 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:22:18 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + case $1 in
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ /usr/bin/docker ps
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + out=
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + init_update_cluster
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + peers=
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + get_peers 10.193.246.70
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ awk -F= '{ print $2 }'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + peers=
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + for i in '${out}'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + for i in '${out}'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ echo
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ echo
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ echo
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ echo
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + peers=,,,,
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ echo
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + peers=
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + peers=
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + '[' '' == '' ']'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ++ env
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:22:18 apoorva-testbed-2 etcd.sh[18637]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053657 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053739 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053755 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053770 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053792 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053801 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053810 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053818 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053833 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053844 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053857 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053913 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053975 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053983 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053991 I | etcdmain: Go Version: go1.5.3
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.053997 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.054005 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.054208 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.054263 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.054335 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.055958 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.055979 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.055990 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18637]: 2016-07-26 22:22:19.055999 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:22:19 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + case $1 in
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + peers=
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + get_peers 10.193.246.70
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ awk -F= '{ print $2 }'
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + peers=
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + for i in '${out}'
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + for i in '${out}'
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ echo
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ echo
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ echo
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ echo
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + peers=,,,,
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ echo
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + peers=
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + peers=
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + '[' '' == '' ']'
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + echo '==> no peers found or single member cluster'
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: ==> no peers found or single member cluster
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + /usr/bin/docker stop etcd
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: + /usr/bin/docker rm etcd
Jul 26 15:22:19 apoorva-testbed-2 etcd.sh[18751]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:22:19 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:22:19 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:22:19 apoorva-testbed-2 systemd[1]: etcd.service failed.
Jul 26 15:22:29 apoorva-testbed-2 systemd[1]: etcd.service holdoff time over, scheduling restart.
Jul 26 15:22:29 apoorva-testbed-2 systemd[1]: Started Etcd.
Jul 26 15:22:29 apoorva-testbed-2 systemd[1]: Starting Etcd...
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + case $1 in
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ /usr/bin/docker ps
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ grep -o 'Cannot connect to the Docker daemon'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + out=
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + '[' '' == 'Cannot connect to the Docker daemon' ']'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + init_update_cluster
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + peers=
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + get_peers 10.193.246.70
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ awk -F= '{ print $2 }'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + peers=
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + for i in '${out}'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + for i in '${out}'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ echo
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ echo
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ echo
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ echo
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + peers=,,,,
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ echo
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + peers=
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + peers=
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + '[' '' == '' ']'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + echo '==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster'
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ==> no peers configured or rest of the etcd cluster is unhealthy, trying to init the cluster
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + export ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + export ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ++ env
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + echo '==> starting etcd with environment:' ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: ==> starting etcd with environment: ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 ETCD_INITIAL_CLUSTER_STATE=new ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 ETCD_ELECTION_TIMEOUT=10000 PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin PWD=/ ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster LANG=en_US.UTF-8 ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 SHLVL=1 ETCD_NAME=node2 ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 ETCD_DATA_DIR=/var/lib/etcd ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 ETCD_HEARTBEAT_INTERVAL=1000 _=/usr/bin/env
Jul 26 15:22:29 apoorva-testbed-2 etcd.sh[18809]: + /usr/bin/docker run -t --rm --net=host --name etcd -e ETCD_NAME=node2 -e ETCD_DATA_DIR=/var/lib/etcd -e ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster -e ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001 -e ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001 -e ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001 -e ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380 -e ETCD_HEARTBEAT_INTERVAL=1000 -e ETCD_ELECTION_TIMEOUT=10000 -e ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001 -e ETCD_INITIAL_CLUSTER_STATE=new -e ETCD_PROXY= quay.io/coreos/etcd:v2.3.1
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046030 I | flags: recognized and used environment variable ETCD_ADVERTISE_CLIENT_URLS=http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046079 I | flags: recognized and used environment variable ETCD_DATA_DIR=/var/lib/etcd
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046093 I | flags: recognized and used environment variable ETCD_ELECTION_TIMEOUT=10000
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046107 I | flags: recognized and used environment variable ETCD_HEARTBEAT_INTERVAL=1000
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046121 I | flags: recognized and used environment variable ETCD_INITIAL_ADVERTISE_PEER_URLS=http://10.193.246.71:2380,http://10.193.246.71:7001
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046137 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER=node1=http://10.193.246.70:2380,node1=http://10.193.246.70:7001,node2=http://10.193.246.71:2380,node2=http://10.193.246.71:7001
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046147 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_STATE=new
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046155 I | flags: recognized and used environment variable ETCD_INITIAL_CLUSTER_TOKEN=contiv-cluster
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046179 I | flags: recognized and used environment variable ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379,http://0.0.0.0:4001
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046195 I | flags: recognized and used environment variable ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046210 I | flags: recognized and used environment variable ETCD_NAME=node2
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046271 W | flags: unrecognized environment variable ETCD_PROXY=
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046333 I | etcdmain: etcd Version: 2.3.1
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046341 I | etcdmain: Git SHA: 2b67f52
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046348 I | etcdmain: Go Version: go1.5.3
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046354 I | etcdmain: Go OS/Arch: linux/amd64
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046362 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046519 I | etcdmain: listening for peers on http://0.0.0.0:2380
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046576 I | etcdmain: listening for client requests on http://0.0.0.0:2379
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.046645 I | etcdmain: listening for client requests on http://0.0.0.0:4001
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.049283 I | etcdmain: stopping listening for client requests on http://0.0.0.0:4001
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.049303 I | etcdmain: stopping listening for client requests on http://0.0.0.0:2379
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.049322 I | etcdmain: stopping listening for peers on http://0.0.0.0:2380
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18809]: 2016-07-26 22:22:30.049331 C | etcdmain: member 134a0b2206344caf has already been bootstrapped
Jul 26 15:22:30 apoorva-testbed-2 systemd[1]: etcd.service: main process exited, code=exited, status=1/FAILURE
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + case $1 in
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + peers=
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + get_peers 10.193.246.70
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ etcdctl --endpoints=http://10.193.246.70:2379,http://10.193.246.70:4001,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001 --total-timeout=15s --timeout=5s member list
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ egrep -o 'clientURLs=.* '
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ awk -F= '{ print $2 }'
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + out='http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: http://10.193.246.70:2379,http://10.193.246.70:4001 '
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + peers=
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + for i in '${out}'
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + for i in '${out}'
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + peers=,http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ echo
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ awk '{print gensub("http://", "", "g", ",http://10.193.246.71:2379,http://10.193.246.71:4001,http://10.193.246.70:2379,http://10.193.246.70:4001")}'
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + peers=,10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ echo
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ awk '{print gensub(":[0-9][0-9]*", "", "g", ",10.193.246.71:2379,10.193.246.71:4001,10.193.246.70:2379,10.193.246.70:4001")}'
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + peers=,10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ echo
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ awk '{print gensub("10.193.246.71", "", "g", ",10.193.246.71,10.193.246.71,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + peers=,,,10.193.246.70,10.193.246.70
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ echo
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ awk '{print gensub("10.193.246.70", "", "g", ",,,10.193.246.70,10.193.246.70")}'
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + peers=,,,,
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ echo
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ++ awk '{print gensub(",,", "", "g", ",,,,")}'
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + peers=
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + peers=
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + '[' '' == '' ']'
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + echo '==> no peers found or single member cluster'
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: ==> no peers found or single member cluster
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + /usr/bin/docker stop etcd
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: Failed to stop container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: + /usr/bin/docker rm etcd
Jul 26 15:22:30 apoorva-testbed-2 etcd.sh[18923]: Failed to remove container (etcd): Error response from daemon: No such container: etcd
Jul 26 15:22:30 apoorva-testbed-2 systemd[1]: etcd.service: control process exited, code=exited status=1
Jul 26 15:22:30 apoorva-testbed-2 systemd[1]: Unit etcd.service entered failed state.
Jul 26 15:22:30 apoorva-testbed-2 systemd[1]: etcd.service failed.
